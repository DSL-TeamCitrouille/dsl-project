@startuml
'==== LÉGENDE ====
'Noir plein = Concepts compile-time (dans l'AST)
'Gris pointillé = Concepts runtime (hors AST)

'==== COMPILE-TIME: Structure du jeu (AST) ====

class Damier <<entry>> {
    name: String
    + demarrer()
    + verifierVictoire()
}

class Board {
    size: int
}

class Pieces {
}

class Piece {
    name: String
    color: String
    quantity: int
}

class Dice {
    faces: int
    + lancerDe(): int
}

class Rules {
}

abstract class Rule {
}

class MoveRule {
    between: String[]
    firstPlayer: String
    direction: enum {diagonal, orthogonal, any}
    canMoveBackward: boolean
}

class CaptureRule {
    mandatory: boolean
    message: String
}

class ActionRule {
    type: enum {move, capture, both}
}

class Objective {
}

abstract class Goal {
}

class WinByCapture {
    target: String
}

class WinBySolitaire {
    removeOwn: boolean
    movesLeft: int
}

class WinByForfeit {
    allowed: boolean
}

'==== UI/SKIN: Apparence visuelle ====

class UI {
}

class Theme {
    lightSquares: String
    darkSquares: String
    highlight: String
}

class Sprites {
}

class SpriteDef {
    key: String
    path: String
}

class Layout {
    showCaptured: boolean
}

'==== RUNTIME: Paramètres UX ====

class Settings {
    animationSpeed: int
    showLegalMoves: boolean
    aiDifficulty: int
}

'==== RUNTIME: État du jeu (hors AST) ====

class State <<runtime>> {
    tourActuel: String
    nbTours: int
}

class Player <<runtime>> {
    id: String
    couleur: String
    nbJetons: int
}

class Damier_Physical <<runtime>> {
    tailleX: int
    tailleY: int
    cases: Case[][]
}

class Case <<runtime>> {
    x: int
    y: int
    pion: Pion?
}

class Pion <<runtime>> {
    couleur: String
    position: Position
}

class Position <<runtime>> {
    x: int
    y: int
}

'==== RELATIONS COMPILE-TIME ====

Damier "1" --> "1" Board : définit
Damier "1" --> "1" Pieces : contient
Damier "1" --> "0..1" Dice : utilise
Damier "1" --> "1" Rules : applique
Damier "1" --> "1" Objective : poursuit

Pieces "1" --> "1..*" Piece : déclare

Rules "1" --> "1..*" Rule : contient
Rule <|-- MoveRule
Rule <|-- CaptureRule
Rule <|-- ActionRule

Objective "1" --> "1..*" Goal : définit
Goal <|-- WinByCapture
Goal <|-- WinBySolitaire
Goal <|-- WinByForfeit

Damier "1" --> "0..1" UI : personnalise
UI "1" --> "0..1" Theme : applique
UI "1" --> "0..1" Sprites : charge
UI "1" --> "0..1" Layout : configure

Sprites "1" --> "0..*" SpriteDef : contient

Damier "1" --> "0..1" Settings : configure

'==== RELATIONS RUNTIME ====

Damier ..> State : << génère >>
State ..> Damier_Physical : << maintient >>
State ..> Player : << gère >>
Damier_Physical ..> Case : << compose >>
Case ..> Pion : << contient >>
Pion ..> Position : << occupe >>
Player ..> Pion : << possède >>

@enduml